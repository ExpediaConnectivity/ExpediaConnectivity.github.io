<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>API Definition - Media Tagging Service</title><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/foundation.min.css"><link rel="stylesheet" href="/css/code/styles/github-gist.css"><link rel="stylesheet" href="/css/styles.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/he-animate.css"><script src="/js/jquery.js"></script><script src="/js/vendor/modernizr.js"></script><script src="/js/highlight.pack.js"></script><script src="/js/foundation.min.js"></script><script src="/js/Core.js"></script><script src="/js/he-main.js"></script><script src="/js/he-plugins.js"></script><script src="/js/he-smoothscroll.js"></script><script src="/js/he-waypoints.js"></script><script src="/js/environment.js"></script><script>$(document).ready(function() {
    $('.api-content pre>code').each(function(i, block) {
        hljs.highlightBlock(block);
    });
    Core.init();
});
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-79394707-1', 'auto');
ga('send', 'pageview');
function googleTranslateElementInit() {
    new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT, gaTrack: true, gaId: 'UA-79394707-1'}, 'google_translate_element');
}</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script></head><body><div id="google_translate_element" style="display: none"></div><header id="site-navigation"><nav class="row full-width" id="nav-top"><div class="inner"><ul><li id="adminnav" style="display:none"><a href="/test-properties/schedules-admin">Admin Schedules View</a></li><li id="hotelnav" style="display:none"><a href="/test-properties/schedules">Schedules</a></li><li id="logoutnav" style="display:none"><a href="/test-properties/" onclick="logout();">Logout</a></li></ul></div></nav><nav class="row full-width" id="nav-main"><div class="inner"><a id="logo" href="/"><img src="/images/DevLogo_40k.png"/></a><div class="hide-for-large" id="menu-toggle"></div><div id="menu-wrap"><div class="hide-for-large"></div><ul><li class="mainlink"><a href="/providers">Connectivity for Providers</a></li><li class="mainlink"><a href="/properties">Connectivity for Properties</a></li><li class="mainlink"><a href="/systems">Systems</a></li><li class="mainlink"><a href="/developer">Developer APIs</a></li><li class="mainlink"><a href="/blog">Blog</a></li><li class="mainlink"><a href="/contact-us">Contact Us</a></li></ul></div></div></nav></header><div class="row full-width"><div class="off-canvas-nav-bar sticky" id="mobileMenuBar"><nav class="title-bar hide-for-large" data-topbar="" role="navigation"><section class="title-bar-left"><button class="menu-icon" type="button" style="outline: none" data-toggle="mobileMenu"><span></span></button></section><span class="title-bar-title"></span></nav></div></div><div class="row full-width"><div class="show-for-large large-3 columns menu"><nav role="navigation" class="sidebar-nav"><header>Media Tagging Service</header><ul class="sidebar-nav-items columns" data-magellan-expedition><li class="pagename"><a class="sidebar-nav-item" href="/apis/hackathon/media-tagging-service/overview.html">Overview</a></li><li class="pagename" data-magellan-arrival="api-definition"><a class="sidebar-nav-item" href="#api-definition">API Definition</a></li><li class="depth2" data-magellan-arrival="authentication"><a class="sidebar-nav-item" href="#authentication">Authentication</a></li><li class="depth2" data-magellan-arrival="api-principles-standards"><a class="sidebar-nav-item" href="#api-principles-standards">API Principles & Standards</a></li><li class="depth2" data-magellan-arrival="resources-endpoints-overview"><a class="sidebar-nav-item" href="#resources-endpoints-overview">Resources & Endpoints Overview</a></li><li class="depth2" data-magellan-arrival="http-status-code"><a class="sidebar-nav-item" href="#http-status-code">HTTP Status Code</a></li><li class="depth2" data-magellan-arrival="http-headers"><a class="sidebar-nav-item" href="#http-headers">HTTP Headers</a></li><li class="depth3" data-magellan-arrival="format-request"><a class="sidebar-nav-item" href="#format-request">Format – Request</a></li><li class="depth3" data-magellan-arrival="format-response"><a class="sidebar-nav-item" href="#format-response">Format – Response</a></li><li class="depth2" data-magellan-arrival="basic-response-wrapper-structure-with-entity-and-errors"><a class="sidebar-nav-item" href="#basic-response-wrapper-structure-with-entity-and-errors">Basic Response Wrapper Structure with Entity and Errors</a></li><li class="depth3" data-magellan-arrival="response-details"><a class="sidebar-nav-item" href="#response-details">Response Details</a></li><li class="pagename"><a class="sidebar-nav-item" href="/apis/hackathon/media-tagging-service/swagger.html">Swagger</a></li></ul></nav></div><div class="off-canvas-wrapper"><div class="off-canvas-wrapper-inner" data-off-canvas-wrapper=""><div class="off-canvas position-left hide-for-large" id="mobileMenu" data-off-canvas="" data-auto-focus="false"></div><div class="off-canvas-content" data-off-canvas-content=""><div class="small-12 medium-10 medium-offset-1 large-8 large-offset-3 xlarge-8 xxlarge-6 columns end api-content"><h1 id="api-definition" data-magellan-destination="api-definition">API Definition</h1>
<h2 id="authentication" data-magellan-destination="authentication">Authentication</h2>
<p>Partner must include a valid username/password in the HTTP header of the request using the below format: </p>
<pre><code>Authorization: Basic &lt;username and password encoded by Base64&gt;
</code></pre><p>Example: </p>
<pre><code>Authorization: Basic RVFDdGVzdDEyOTMzODcwOmV3NjduazMz
</code></pre><p>Where &quot;RVFDdGVzdDEyOTMzODcwOmV3NjduazMz&quot; is the string &quot;EQCtest12933870:ew67nk33&quot; (username:password) Base64-encoded.</p>
<p>For more information about getting started for the first time, and authorization, please refer to the <a href="guides.html#/howtogetstarted">FAQ &amp; Guides section</a></p>
<h2 id="api-principles-standards" data-magellan-destination="api-principles-standards">API Principles &amp; Standards</h2>
<ul>
<li><strong>HTTP 1.1</strong> : Our API only supports HTTP 1.1. Requests made with HTTP 1.0 explicitly will be denied.</li>
<li><strong>JSON</strong> : The service will return a JSON document containing the result of the analysis.</li>
</ul>
<h2 id="resources-endpoints-overview" data-magellan-destination="resources-endpoints-overview">Resources &amp; Endpoints Overview</h2>
<ul>
<li>All of Expedia APIs now live under the <a href="https://services.expediapartnercentral.com/">https://services.expediapartnercentral.com/</a> domain. API  users should make sure to only ever use the fully qualified domain name in their requests to our APIs, and never try to guess/hardcode the IP this address resolves to. In order to provide a robust, highly available and scalable solution, Expedia can change the IPs being used without notice.</li>
</ul>
<div><table>
<thead>
<tr>
<th>Resource</th>
<th>Supported Operations</th>
<th>Production Endpoint</th>
<th>Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td>MediaTaggingService</td>
<td>Tag Image (POST)</td>
<td>POST <a href="https://services.expediapartnercentral.com/image-tag/v1">https://services.expediapartnercentral.com/image-tag/v1</a></td>
<td>mediaUrl -or- File</td>
</tr>
<tr>
<td>MediaTaggingService</td>
<td>Tag Image -- including Pollo Loco (POST)</td>
<td>POST <a href="https://services.expediapartnercentral.com/image-tag/v2">https://services.expediapartnercentral.com/image-tag/v2</a></td>
<td>mediaUrl -or- File</td>
</tr>
</tbody>
</table>
</div><h2 id="http-status-code" data-magellan-destination="http-status-code">HTTP Status Code</h2>
<p>The API will leverage HTTP status codes as defined by RFC 2616, Section 10. More specifically, users should expect the following from the API: </p>
<div><table>
<thead>
<tr>
<th>Status Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>Success</td>
</tr>
<tr>
<td>400</td>
<td>Errors induced by user due to incorrect input</td>
</tr>
<tr>
<td>401</td>
<td>Authentication error</td>
</tr>
<tr>
<td>403</td>
<td>Authorization error</td>
</tr>
<tr>
<td>404</td>
<td>Invalid resource</td>
</tr>
<tr>
<td>500</td>
<td>Internal system error (shouldn’t be retried)</td>
</tr>
</tbody>
</table>
</div><h2 id="http-headers" data-magellan-destination="http-headers">HTTP Headers</h2>
<p>HTTP headers are slightly different between a request made to the EPS Product API, and responses returned.</p>
<h3 id="format-request" data-magellan-destination="format-request">Format – Request</h3>
<div><table>
<thead>
<tr>
<th>Header</th>
<th>Type</th>
<th>Required</th>
<th>Input Format</th>
</tr>
</thead>
<tbody>
<tr>
<td>Authorization</td>
<td>String</td>
<td>Required</td>
<td>Authorization: Basic [username:password encoded by Base64]</td>
</tr>
<tr>
<td>Accept</td>
<td>String</td>
<td>Required</td>
<td>Accept: application/json</td>
</tr>
<tr>
<td>Content-Type</td>
<td>String</td>
<td>Required*</td>
<td>Content-Type: multipart</td>
</tr>
</tbody>
</table>
</div><h3 id="format-response" data-magellan-destination="format-response">Format – Response</h3>
<div><table>
<thead>
<tr>
<th>Header</th>
<th>Type</th>
<th>Input Format</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content-Type</td>
<td>String</td>
<td>Content-Type: application/json</td>
</tr>
</tbody>
</table>
</div><h2 id="basic-response-wrapper-structure-with-entity-and-errors" data-magellan-destination="basic-response-wrapper-structure-with-entity-and-errors">Basic Response Wrapper Structure with Entity and Errors</h2>
<p>All responses provided by the API will either contain an HTTP Entity element, which may represent a single object or an array of objects, or an Errors object for an array of errors. </p>
<h3 id="response-details" data-magellan-destination="response-details">Response Details</h3>
<p>When you call this service you need to either provide a valid URL (targeting an image) or you send the binary file itself.</p>
<p>The service will download the image and send it to different image recognition APIs. The information is then gathered and bundled into the MediaTaggingResponse.</p>
<h4 id="mediataggingresponse" data-magellan-destination="mediataggingresponse">MediaTaggingResponse</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mediaUrl</code></td>
<td>String</td>
<td>The media URL received from the request (if using mediaUrl).</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>String</td>
<td>The name of the file received from the request (if using the binary file content).</td>
</tr>
<tr>
<td><code>label</code></td>
<td>List<Label></td>
<td>The list of tags of type label found for this image.</td>
</tr>
<tr>
<td><code>landmark</code></td>
<td>List<Landmark></td>
<td>The list of tags of type landmark found for this image.</td>
</tr>
<tr>
<td><code>text</code></td>
<td>List<Text></td>
<td>The sentences of text external APIs were able to read in the image (<a href="https://en.wikipedia.org/wiki/Optical_character_recognition">OCR</a>).</td>
</tr>
<tr>
<td><code>face</code></td>
<td>List<Face></td>
<td>The list of tags of type face found for this image.</td>
</tr>
<tr>
<td><code>safesearch</code></td>
<td>List<SafeSearch></td>
<td>The list of tags of type safesearch for this image. These special tags can be used for image auto-moderation.</td>
</tr>
</tbody>
</table>
</div><h4 id="label" data-magellan-destination="label">Label</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td>String</td>
<td>The name of the external API that yielded this tag.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>String</td>
<td>The label. It either identify an object found in the image (ex: church) or something the image is about (ex: symmetry).</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td>Float</td>
<td>A confidence level ranging from 0 to 1 provided by the external API.</td>
</tr>
</tbody>
</table>
</div><h4 id="landmark" data-magellan-destination="landmark">Landmark</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td>String</td>
<td>The name of the external API that yielded this tag.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>String</td>
<td>The name of the landmark identified within the image.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td>Float</td>
<td>A confidence level ranging from 0 to 1 provided by the external API.</td>
</tr>
<tr>
<td><code>lat</code></td>
<td>Float</td>
<td>Latitude of the identified landmark</td>
</tr>
<tr>
<td><code>lng</code></td>
<td>Float</td>
<td>Longitude of the identified landmark</td>
</tr>
<tr>
<td><code>value</code></td>
<td>Integer</td>
<td>*This value is only set when the landmark was found within Gaia; it correspond to the Gaia Id of the landmark.</td>
</tr>
<tr>
<td><code>address</code></td>
<td>LandmarkAddress</td>
<td>Address of the landmark.</td>
</tr>
</tbody>
</table>
</div><h4 id="landmark-2" data-magellan-destination="landmark-2">Landmark</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>address</code></td>
<td>String</td>
<td>Address line</td>
</tr>
<tr>
<td><code>city</code></td>
<td>String</td>
<td>City name</td>
</tr>
<tr>
<td><code>county</code></td>
<td>String</td>
<td>Country name</td>
</tr>
<tr>
<td><code>longName</code></td>
<td>String</td>
<td>More detailed name</td>
</tr>
</tbody>
</table>
</div><h4 id="text" data-magellan-destination="text">Text</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td>String</td>
<td>The name of the external API that yielded this tag.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>String</td>
<td>&quot;description&quot;</td>
</tr>
<tr>
<td><code>value</code></td>
<td>String</td>
<td>The text read via OCR</td>
</tr>
</tbody>
</table>
</div><h4 id="face" data-magellan-destination="face">Face</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td>String</td>
<td>The name of the external API that yielded this tag.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>String</td>
<td>&quot;face&quot;</td>
</tr>
<tr>
<td><code>gender</code></td>
<td>String</td>
<td>Predicted sex of the person: &quot;Male&quot; or &quot;Female&quot; (provided by MICROSOFT_VISION only)</td>
</tr>
<tr>
<td><code>age</code></td>
<td>Integer</td>
<td>Predicted age of the person (provided by MICROSOFT_VISION only)</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td>Float</td>
<td>(provided by GOOGLE_VISION only)</td>
</tr>
<tr>
<td><code>faceRectangle</code></td>
<td>FaceRectangle</td>
<td>Position of the face detected in the image.</td>
</tr>
</tbody>
</table>
</div><h4 id="facerectangle" data-magellan-destination="facerectangle">FaceRectangle</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>width</code></td>
<td>Integer</td>
<td>Width of the rectangle bounding the detected face.</td>
</tr>
<tr>
<td><code>height</code></td>
<td>Integer</td>
<td>Height of the rectangle bounding the detected face.</td>
</tr>
<tr>
<td><code>top</code></td>
<td>Integer</td>
<td>Position &#39;top&#39; of the rectangle bounding the detected face.</td>
</tr>
<tr>
<td><code>left</code></td>
<td>Integer</td>
<td>Postion &#39;left&#39; of the rectangle bounding the detected face.</td>
</tr>
</tbody>
</table>
</div><h4 id="safesearch" data-magellan-destination="safesearch">SafeSearch</h4>
<div><table>
<thead>
<tr>
<th>Property</th>
<th>Data Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>source</code></td>
<td>String</td>
<td>The name of the external API that yielded this tag.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>String</td>
<td>Name of the moderation rule (ex: adult, violence, spoof or medical)</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td>Float</td>
<td>A confidence level ranging between 0 and 1. Where 1 means the image should be censored.</td>
</tr>
</tbody>
</table>
</div></div></div></div></div></div><footer class="row full-width" id="site-footer"><div class="large-8 large-centered columns"><div class="links text-center"><a class="link-item" href="https://www.expediapartnercentral.com" target="_blank">Expedia PartnerCentral</a> | <a class="link-item" href="https://expediagso.secure.force.com/kb/pkb_Home?l=en_US" target="_blank">Knowledge Base</a> | <a class="link-item" href="/terms">Terms and Conditions</a> | <a class="link-item" href="/privacy">Privacy Policy</a> | <a class="link-item" href="/license">License Agreement</a></div><div class="show-for-large"><div class="footer-logo">&nbsp;</div></div><div id="footer-copyright">&copy; 2017 Expedia, Inc. All rights reserved. Confidential and proprietary.</div></div></footer></body></html>