<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference - Sort Rank API</title><meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Expedia Connectivity</title>

<link rel="stylesheet" href="/css/foundation.min.css">
<link rel="stylesheet" href="/css/code/styles/github-gist.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/styles.css">

<link rel="icon" href="/favicon.ico" />
<link rel="stylesheet" href="/css/he-animate.css">
<!--<link rel="stylesheet" href="/css/he-main.css">-->

<script src="/js/jquery.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="/js/highlight.pack.js"></script>
<script src="/js/foundation.min.js"></script>
<script src="/js/Core.js"></script>
<script src="/js/epsga.js"></script>
<script src="/js/gaEventTracking.js"></script>
<script src="/js/he-main.js"></script>
<script src="/js/he-plugins.js"></script>
<script src="/js/he-smoothscroll.js"></script>
<script src="/js/he-waypoints.js"></script>
<script src="/js/vendor/modernizr-2.8.3.min.js"></script>
<script src="/js/jwtAuthentication.js"></script>
<script>
    $(document).ready(function() {
        $('.api-content pre>code').each(function(i, block) {
            hljs.highlightBlock(block);
        });
        if (document.cookie.indexOf('NOTE_SHOWN') == -1) {
            $('#note').show()
        }
        $('#close').on('click', function() {
            document.cookie = 'NOTE_SHOWN=true';
            $('#note').hide();
            Core.onScroll();
        });
        Core.init();
    });

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-79394707-1', 'auto');
    ga('send', 'pageview');
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT, gaTrack: true, gaId: 'UA-79394707-1'}, 'google_translate_element');
    }
</script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head><body><div id="google_translate_element" style="display: none;"></div>
<header id="site-navigation">
    <div id="note" style="display:none" />
        <a id="close"><img src="/images/fi-x.svg" /></a>
        <span class="line">Welcome to the new Expedia Connectivity site. </span>
        <span class="line"><a href="http://www.expediaquickconnect.com/?noredirect=true">Go back to Expedia Quick Connect</a> or <a href="http://goo.gl/forms/FYq9R3ympLvot89v2" target="_new">Give feedback</a>. </span>
    </div>
        <nav id="nav-top" class="row full-width">
        <div class="inner">
            <ul>
                <li><a href="https://www.expediapartnercentral.com" target="_blank">Expedia PartnerCentral</a></li>
                <li><a href="/contact-us" onclick="ga('send','event','ContactUs','clicked','developer.expediapartnercentral.com');">Contact Us</a></li>
                <li id="hotelnav" style="display:none"><a href="/test-properties/hotels">Hotels</a></li>
                <li id="apikeynav" style="display:none"><a href="/test-properties/apikeys">API Keys</a></li>
                <li id="logoutnav" style="display:none"><a href="/test-properties/" onclick="logout();">Logout</a></li>
            </ul>
        </div>
    </nav>
    <nav id="nav-main" class="row full-width">
        <div class="inner">
            <a id="logo" href="/">
                <img src="/images/DevLogo_40k.png" />
            </a>

            <div id="menu-toggle" class="hide-for-large-up"></div>
            <div id="menu-wrap">
                <ul>
                    <li class="mainlink"><a href="/providers">Connectivity for Providers</a></li>
                    <li class="mainlink"><a href="/properties">Connectivity for Properties</a></li>
                    <!--<li class="mainlink hidden"><a href="/solutions">Solutions</a></li>-->
                    <li class="mainlink"><a href="/systems">Systems</a></li>
                    <li class="mainlink"><a href="/developer">Developer APIs</a></li>
                    <!--<li><a href="/hackathon">Expedia Hackathon</a></li>-->
                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="row full-width"><div class="off-canvas-nav-bar sticky"><nav class="top-bar tab-bar hide-for-medium-up" data-topbar role="navigation"><section class="left-small"><a class="left-off-canvas-toggle menu-icon" href=""><span></span></a></section><section class="middle tab-bar-section"><span class="title"></span></section></nav></div></div><div class="row full-width"><div class="hide-for-small-only medium-3 large-2 columns menu"><nav role="navigation" class="sidebar-nav"><header>Sort Rank API</header><ul class="sidebar-nav-items columns" data-magellan-expedition><li class="pagename"><a class="sidebar-nav-item" href="/apis/expedia-partner-hackathon/sort-rank-api/quick-start.html">Quick Start</a></li><li class="pagename" data-magellan-arrival="reference"><a class="sidebar-nav-item" href="#reference">Reference</a></li><li class="depth2" data-magellan-arrival="authentication"><a class="sidebar-nav-item" href="#authentication">Authentication</a></li><li class="depth2" data-magellan-arrival="sort-rank-endpoint"><a class="sidebar-nav-item" href="#sort-rank-endpoint">Sort Rank Endpoint</a></li><li class="depth3" data-magellan-arrival="request-parameters"><a class="sidebar-nav-item" href="#request-parameters">Request Parameters</a></li><li class="depth3" data-magellan-arrival="response"><a class="sidebar-nav-item" href="#response">Response</a></li><li class="depth3" data-magellan-arrival="response-format"><a class="sidebar-nav-item" href="#response-format">Response Format</a></li><li class="pagename"><a class="sidebar-nav-item" href="/apis/expedia-partner-hackathon/sort-rank-api/try-it.html">Try It</a></li><li class="pagename"><a class="sidebar-nav-item" href="/apis/expedia-partner-hackathon/sort-rank-api/video.html">Video Tutorial</a></li></ul></nav></div><div class="off-canvas-wrap" data-offcanvas><div class="inner-wrap"><aside class="left-off-canvas-menu hide-for-medium-up"></aside><div class="small-12 medium-9 medium-offset-3 large-8 large-offset-2 columns end api-content"><h1 id="reference" data-magellan-destination="reference">Reference</h1>
<h2 id="authentication" data-magellan-destination="authentication">Authentication</h2>
<p>The Sort Ranks API requires HTTP basic auth credentials to be supplied with every request.</p>
<p>Credentials must match a valid hotelier username/password.  If data for a specific hotel or list of hotels is being requested, the credentials must be authorized to access data for those hotels.</p>
<h2 id="sort-rank-endpoint" data-magellan-destination="sort-rank-endpoint">Sort Rank Endpoint</h2>
<pre><code>GET /lodgingSort/v1/hops/HopsAverageRanks
</code></pre><p>The Sort Rank endpoint will return a hotel&#39;s average sort rank data for a range of check-in dates.  </p>
<h3 id="request-parameters" data-magellan-destination="request-parameters">Request Parameters</h3>
<div><table>
<thead>
<tr>
<th>Name</th>
<th>Parameter Type</th>
<th>Data Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Authorization</code></td>
<td>Header</td>
<td>String</td>
<td><code>Basic dGVzdDp0ZXN0</code></td>
<td>Unique identifier for a property/hotel.</td>
</tr>
<tr>
<td><code>hotelId</code></td>
<td>Query</td>
<td>Integer</td>
<td><code>123</code></td>
<td>Hotel identifier</td>
</tr>
<tr>
<td><code>cid</code></td>
<td>Query</td>
<td>String</td>
<td><code>prague-hackathon</code></td>
<td>Client identifier</td>
</tr>
<tr>
<td><code>searchDate</code></td>
<td>Query</td>
<td>String</td>
<td><code>2016-05-15</code></td>
<td>Can send in a list of search dates. Format: YYYY-MM-DD. Maximum number of search dates: 2 Each search date should be in this range: from today to previous 90 days (from today - 90 days to today) both inclusive. i.e. today-90 &lt;= searchDate &lt;= today, for each searchDate</td>
</tr>
<tr>
<td><code>checkin</code></td>
<td>Query</td>
<td>String</td>
<td><code>2016-05-16</code></td>
<td>Checkin date starts on this day.  Checkin date range: from search date to next 90 days. i.e. searchDate&lt;= checkIn &lt;= searchDate+89</td>
</tr>
<tr>
<td><code>numDays</code></td>
<td>Query</td>
<td>Integer</td>
<td><code>1</code></td>
<td>Number of checkin dates. Max is 90 days and numDays + checkIn &lt; searchDate + 90. Average sort rank/price/compensation is returned for each Checkin date, where Checkin date starts = checkIn and Checkin date ends = checkIn + numDays - 1.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>Query</td>
<td>String</td>
<td><code>usd</code></td>
<td>Standard ISO currency code (for average price and average compensation). Currently only the default USD is supported</td>
</tr>
</tbody>
</table>
</div><h5 id="sample-request-with-all-parameters-specified" data-magellan-destination="sample-request-with-all-parameters-specified">Sample Request with all parameters specified</h5>
<pre><code>https://services.expediapartnercentral.com/sort-ranks/lodgingSort/v1/hops/HopsAverageRanks?hotelId=1&amp;searchDate=2016-05-15&amp;checkin=2016-05-16&amp;numDays=2
</code></pre><h3 id="response" data-magellan-destination="response">Response</h3>
<p>The API returns a hotel&#39;s average sort rank, average price, and average compensation in JSON format aggregated over:</p>
<ul>
<li>Search Date: A list of search date is sent in the request, and the aggregation is for each search date. </li>
<li>TPID: up to 3 TPIDs are defined for a hotel in top TPIDs and Regions list (see Sort Rank Report: Top TPIDs and Regions API), and the aggregation is over each TPID.</li>
<li>Region: up to 3 Regions are defined for each of the top TPID in top TPIDs and Regions list, and the aggregation is over each Region.</li>
<li>Checkin date: average sort rank/price/compensation is returned for each checkin date. Checkin date starts at the checkIn (as sent in the request) and ends at checkIn + numDays - 1.</li>
</ul>
<h3 id="response-format" data-magellan-destination="response-format">Response Format</h3>
<div><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>hotelId</td>
<td>Integer</td>
<td>Hotel Identifier</td>
</tr>
<tr>
<td>searchDate</td>
<td>String</td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td>tpid</td>
<td>Integer</td>
<td>Point of Sale (POSa)</td>
</tr>
<tr>
<td>checkinDate</td>
<td>String</td>
<td>YYYY-MM-DD</td>
</tr>
<tr>
<td>regionId</td>
<td>Long</td>
<td>GAIA region ID</td>
</tr>
<tr>
<td>avgRank</td>
<td>Double</td>
<td>Average sort rank (for all searches done on the specified search date for the specified checkin date on the specified TPID and region).</td>
</tr>
<tr>
<td>avgPrice</td>
<td>Double</td>
<td>Average price is returned in USD.</td>
</tr>
<tr>
<td>avgComp</td>
<td>Double</td>
<td>Average compensation is returned in USD.</td>
</tr>
</tbody>
</table>
</div><h5 id="sample-response" data-magellan-destination="sample-response">Sample response</h5>
<pre><code class="lang-JSON">{
    &quot;hotelId&quot;: 1,
    &quot;searchDates&quot;: [
        {
            &quot;searchDate&quot;: &quot;2016-05-15&quot;,
            &quot;tpids&quot;: [
                {
                    &quot;regions&quot;: [
                        {
                            &quot;data&quot;: [
                                {
                                    &quot;avgComp&quot;: 76.67,
                                    &quot;avgPrice&quot;: 306.69,
                                    &quot;avgRank&quot;: 374.24,
                                    &quot;checkinDate&quot;: &quot;2016-05-16&quot;
                                },
                                {
                                    &quot;avgComp&quot;: 95.34,
                                    &quot;avgPrice&quot;: 381.37,
                                    &quot;avgRank&quot;: 272.98,
                                    &quot;checkinDate&quot;: &quot;2016-05-17&quot;
                                }
                            ],
                            &quot;regionId&quot;: 2114
                        },
                        {
                            &quot;data&quot;: [
                                {
                                    &quot;avgComp&quot;: 97.66,
                                    &quot;avgPrice&quot;: 390.64,
                                    &quot;avgRank&quot;: 3.0,
                                    &quot;checkinDate&quot;: &quot;2016-05-17&quot;
                                }
                            ],
                            &quot;regionId&quot;: 800053
                        },
                        {
                            &quot;data&quot;: [],
                            &quot;regionId&quot;: 6144914
                        }
                    ],
                    &quot;tpid&quot;: 3101
                },
                {
                    &quot;regions&quot;: [
                        {
                            &quot;data&quot;: [
                                {
                                    &quot;avgComp&quot;: 79.78,
                                    &quot;avgPrice&quot;: 319.11,
                                    &quot;avgRank&quot;: 436.18,
                                    &quot;checkinDate&quot;: &quot;2016-05-16&quot;
                                },
                                {
                                    &quot;avgComp&quot;: 97.58,
                                    &quot;avgPrice&quot;: 390.3,
                                    &quot;avgRank&quot;: 387.64,
                                    &quot;checkinDate&quot;: &quot;2016-05-17&quot;
                                }
                            ],
                            &quot;regionId&quot;: 2114
                        }
                    ],
                    &quot;tpid&quot;: 3107
                },
                {
                    &quot;regions&quot;: [
                        {
                            &quot;data&quot;: [
                                {
                                    &quot;avgComp&quot;: 71.94,
                                    &quot;avgPrice&quot;: 287.75,
                                    &quot;avgRank&quot;: 372.18,
                                    &quot;checkinDate&quot;: &quot;2016-05-16&quot;
                                },
                                {
                                    &quot;avgComp&quot;: 93.25,
                                    &quot;avgPrice&quot;: 372.97,
                                    &quot;avgRank&quot;: 276.72,
                                    &quot;checkinDate&quot;: &quot;2016-05-17&quot;
                                }
                            ],
                            &quot;regionId&quot;: 2114
                        }
                    ],
                    &quot;tpid&quot;: 3109
                }
            ]
        }
    ]
}
</code></pre>
<h4 id="error-messages" data-magellan-destination="error-messages">Error Messages</h4>
<p>Even when there are errors, the Sort Ranks API always returns a 200 response.  The error message is specified in an error field in the response.  The following are some sample error messages:</p>
<pre><code class="lang-JSON">{
  &quot;error&quot;: &quot;No clientId specified or unknown clientId&quot;
}
</code></pre>
<pre><code class="lang-JSON">{
  &quot;error&quot;: &quot;No hotelId specified&quot;
}
</code></pre>
<pre><code class="lang-JSON">{
  &quot;error&quot;: &quot;Search Date(s) out of range&quot;,
  &quot;hotelId&quot;: 1
}
</code></pre>
<pre><code class="lang-JSON">{
  &quot;error&quot;: &quot;Exceeded max. number of Search Dates&quot;,
  &quot;hotelId&quot;: 1
}
</code></pre>
</div><a class="exit-off-canvas hide-for-medium-up"></a></div></div></div><footer id="site-footer" class="row full-width">
    <div class="large-8 large-centered columns">
        <div class="links text-center">
            <a class="link-item" href="https://expediagso.secure.force.com/kb/pkb_Home?l=en_US" target="_blank">Knowledge Base</a> |
            <a class="link-item" href="/terms">Terms and Conditions</a> |
            <a class="link-item" href="/privacy">Privacy Policy</a> |
            <a class="link-item" href="/license">License Agreement</a>
        </div>
        <div class="show-for-large-up">
            <div class="footer-logo">&nbsp;</div>
        </div>
        <div id="footer-copyright">Â© 2016 Expedia, Inc. All rights reserved. Confidential and proprietary.</div>
    </div>
</footer>
<input type="hidden" id="eventTrackingTeamName" value="EPSConnectivityBNE" />
<input type="hidden" id="eventTrackingGAAccount" value="UA-79394707-1" />
<input type="hidden" id="eventTrackingIsOnboarding" value="" /><input type="hidden" id="eventTrackingPageName" value="Reference - Sort Rank API"/></body></html>